{% extends 'base.html' %}
{% load static %}

{% block title %}{{ formation.title }} | Formations{% endblock %}

{% block head_extra %}
<style>
    .prose-custom h3 {
        font-size: 1.25em;
        font-weight: 700;
        margin-top: 1.5em;
        margin-bottom: 1em;
        padding-bottom: 0.4em;
        border-bottom: 2px solid #e5e7eb; /* gray-200 */
    }
    .dark .prose-custom h3 {
        border-bottom-color: #374151; /* gray-700 */
    }
    .prose-custom ul {
        margin-top: 0.5em;
        padding-left: 0;
        list-style: none;
    }
    .prose-custom ul li {
        position: relative;
        padding-left: 2em;
        margin-bottom: 0.75em;
    }
    .prose-custom ul li::before {
        content: '✓';
        position: absolute;
        left: 0;
        top: 0;
        font-weight: 600;
        color: #34d399; /* green-400 */
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Fonction pour formater les nombres avec des espaces
    function formatNumber(num) {
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
    }
    
    // Trouver tous les éléments contenant des prix et les formater
    const priceElements = document.querySelectorAll('[data-price]');
    priceElements.forEach(function(element) {
        const price = element.getAttribute('data-price');
        const formattedPrice = formatNumber(price);
        element.textContent = formattedPrice + ' FCFA';
    });
});
</script>
{% endblock %}

{% block content %}
<div class="py-12">
    <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-extrabold text-gray-800 dark:text-white mb-4">{{ formation.title }}</h1>
                <div class="flex items-center justify-center gap-4 text-gray-600 dark:text-gray-300">
                    <span class="bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-3 py-1 rounded-full font-semibold">
                        {{ formation.get_level_display }}
                    </span>
                    <span class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.414L11 10.586V6z" clip-rule="evenodd" />
                        </svg>
                        {{ formation.duration }}
                    </span>
                </div>
            </div>

            <!-- Image -->
            {% if formation.image %}
            <div class="mb-12 shadow-2xl rounded-lg overflow-hidden">
                <img src="{{ formation.image.url }}" alt="{{ formation.title }}" 
                     class="w-full h-auto max-h-[500px] object-cover">
            </div>
            {% endif %}

            <!-- Sections grid -->
            <div class="space-y-8">
                <!-- Description -->
                <div class="bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-8 transform hover:-translate-y-1 transition-transform duration-300">
                    <h2 class="flex items-center gap-3 text-2xl font-bold text-gray-800 dark:text-white mb-6 border-b-2 border-gray-100 dark:border-neutral-700 pb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        Description
                    </h2>
                    <div class="prose prose-lg max-w-none dark:prose-invert prose-blue">
                        {{ formation.description|safe }}
                    </div>
                </div>

                <!-- Prérequis -->
                <div class="bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-8 transform hover:-translate-y-1 transition-transform duration-300">
                    <h2 class="flex items-center gap-3 text-2xl font-bold text-gray-800 dark:text-white mb-6 border-b-2 border-gray-100 dark:border-neutral-700 pb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        Prérequis
                    </h2>
                    <div class="prose prose-lg max-w-none dark:prose-invert prose-green">
                        {{ formation.prerequisites|safe }}
                    </div>
                </div>

                <!-- Programme -->
                <div class="bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-8 transform hover:-translate-y-1 transition-transform duration-300">
                    <h2 class="flex items-center gap-3 text-2xl font-bold text-gray-800 dark:text-white mb-6 border-b-2 border-gray-100 dark:border-neutral-700 pb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                        </svg>
                        Programme de la formation
                    </h2>
                    <div class="prose prose-lg max-w-none dark:prose-invert prose-custom">
                        {{ formation.program|safe }}
                    </div>
                </div>
            </div>

            <!-- CTA -->
            <div class="mt-12 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg p-8 text-center shadow-xl">
                <h3 class="text-3xl font-bold mb-4">
                    Prêt à booster vos compétences ?
                </h3>
                <p class="text-blue-100 mb-6 max-w-2xl mx-auto">
                    Contactez-nous pour vous inscrire à cette formation et commencer votre parcours d'apprentissage.
                </p>
                <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                    <span class="text-4xl font-extrabold text-white" data-price="{{ formation.price|floatformat:0 }}">
                        {{ formation.price|floatformat:0 }} FCFA
                    </span>
                    <a href="{% url 'about' %}#contact" 
                       class="inline-block bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-transform transform hover:scale-105 duration-300">
                        Inscrivez-vous
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 